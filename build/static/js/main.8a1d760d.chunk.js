(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(0),o=t(1),r=t.n(o),a=t(15),u=t.n(a),i=(t(21),t(6)),s=t(3),l=function(e){var n=e.newFilter,t=e.handleFilterChange;return Object(c.jsxs)("div",{children:["filter shown with ",Object(c.jsx)("input",{value:n,onChange:t})]})},d=function(e){var n=e.addPerson,t=e.newName,o=e.handleNameChange,r=e.newNumber,a=e.handleNumberChange;return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("form",{onSubmit:n,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:t,onChange:o})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:r,onChange:a})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})})},j=function(e){var n=e.person,t=e.removePerson;return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("li",{children:[n.name," ",n.number," ",Object(c.jsx)("button",{onClick:function(){return t(n)},children:"delete"})]})})},b=function(e){var n=e.personsToShow,t=e.removePerson;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)("ul",{children:n.map((function(e){return Object(c.jsx)(j,{person:e,removePerson:t},e.id)}))})]})},f=function(e){var n=e.message;return null===n?null:Object(c.jsx)("div",{className:"notification",children:n})},h=function(e){var n=e.message;return null===n?null:Object(c.jsx)("div",{className:"error",children:n})},m=t(4),O=t.n(m),g="/api/persons",v={getAll:function(){return O.a.get(g).then((function(e){return e.data}))},create:function(e){return O.a.post(g,e).then((function(e){return e.data}))},update:function(e){return O.a.put("".concat(g,"/").concat(e.id),e).then((function(e){return e.data}))},remove:function(e){return O.a.delete("".concat(g,"/").concat(e)).then((function(e){return e.data}))}},p=function(){var e=Object(o.useState)([]),n=Object(s.a)(e,2),t=n[0],r=n[1],a=Object(o.useState)(""),u=Object(s.a)(a,2),j=u[0],m=u[1],O=Object(o.useState)(""),g=Object(s.a)(O,2),p=g[0],x=g[1],w=Object(o.useState)(""),C=Object(s.a)(w,2),S=C[0],F=C[1],N=Object(o.useState)(!0),k=Object(s.a)(N,2),P=k[0],T=k[1],y=Object(o.useState)(null),A=Object(s.a)(y,2),L=A[0],U=A[1],D=Object(o.useState)(null),I=Object(s.a)(D,2),B=I[0],E=I[1];Object(o.useEffect)((function(){v.getAll().then((function(e){r(e)}))}),[]);var J=P?t:t.filter((function(e){return-1!==e.name.toLowerCase().indexOf(S.toLowerCase())}));return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Phonebook"}),Object(c.jsx)(f,{message:L}),Object(c.jsx)(h,{message:B}),Object(c.jsx)(l,{newFilter:S,handleFilterChange:function(e){console.log(e.target.value),F(e.target.value),""!==S&&T(!1)}}),Object(c.jsx)("h2",{children:"Add new number"}),Object(c.jsx)(d,{addPerson:function(e){if(e.preventDefault(),console.log(j.toLowerCase()),t.find((function(e){return e.name===j}))){if(!0===window.confirm("".concat(j," is already in the phonebook. Would you like to update the number for ").concat(j,"?"))){console.log("User pressed OK.");var n=t.find((function(e){return e.name===j})),c=Object(i.a)(Object(i.a)({},n),{},{number:p});v.update(c).then((function(e){r(t.map((function(n){return n.name!==j?n:e}))),U("Updated ".concat(e.name,".")),setTimeout((function(){U(null)}),5e3),m(""),x("")})).catch((function(e){E("'".concat(n.name,"' has already been removed from server")),setTimeout((function(){E(null)}),5e3),r(t.filter((function(e){return e.id!==n.id})))}))}else console.log("User pressed cancel.")}else{var o={name:j,number:p,id:j};console.log("Add button clicked.",e.target),console.log("ID: ",o.id),v.create(o).then((function(e){r(t.concat(e)),U("Added ".concat(e.name,".")),setTimeout((function(){U(null)}),5e3),m(""),x("")}))}},newName:j,handleNameChange:function(e){console.log(e.target.value),m(e.target.value)},newNumber:p,handleNumberChange:function(e){console.log(e.target.value),x(e.target.value)}}),Object(c.jsx)(b,{personsToShow:J,removePerson:function(e){console.log("Delete button clicked for ".concat(e.id,".")),!0===window.confirm("Are you sure you want to delete ".concat(e.name,"?"))?(console.log("User pressed OK."),v.remove(e.id),r(t.filter((function(n){return n.id!==e.id}))),U("Removed ".concat(e.name,".")),setTimeout((function(){U(null)}),5e3)):console.log("User pressed cancel.")}})]})},x=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,41)).then((function(n){var t=n.getCLS,c=n.getFID,o=n.getFCP,r=n.getLCP,a=n.getTTFB;t(e),c(e),o(e),r(e),a(e)}))};u.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(p,{})}),document.getElementById("root")),x()}},[[40,1,2]]]);
//# sourceMappingURL=main.8a1d760d.chunk.js.map